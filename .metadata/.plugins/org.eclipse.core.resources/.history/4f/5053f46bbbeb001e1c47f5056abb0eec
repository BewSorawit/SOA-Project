package project.projectsoa.repository;

import java.util.ArrayList;
import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;

import project.projectsoa.model.Rental;
import project.projectsoa.response.RentalResponse;


public interface RentalRepository extends JpaRepository<RentalResponse,Integer> {
	//new project.projectsoa.response.RentalResponse
	//SELECT rental.rental_id,user.name,rental.order_date,rental.due_date,rental.return_date,rental.rent_status,rental.payment_status,costume.costume_name FROM rental INNER JOIN rentaldetail on rental.rental_id = rentaldetail.rental_id INNER JOIN costume on rentaldetail.costume_id = costume.costume_id INNER JOIN user on rental.cus_id = user.cus_id WHERE user.user_role = "CUSTOMER"  
			//rental.rental_id,user.name,rental.order_date,rental.due_date,rental.return_date,rental.rent_status,rental.payment_status,costume.costume_name FROM rental INNER JOIN rentaldetail on rental.rental_id = rentaldetail.rental_id INNER JOIN costume on rentaldetail.costume_id = costume.costume_id INNER JOIN user on rental.cus_id = user.cus_id WHERE user.user_role = "CUSTOMER" ORDER BY `rental`.`order_date` DESC
	@Query(value ="SELECT new project.projectsoa.response.RentalResponse(rental.rental_id,user.name,rental.order_date,rental.due_date,rental.return_date,rental.rent_status,rental.payment_status,costume.costume_name FROM rental INNER JOIN rentaldetail on rental.rental_id = rentaldetail.rental_id INNER JOIN costume on rentaldetail.costume_id = costume.costume_id INNER JOIN user on rental.cus_id = user.cus_id WHERE user.user_role = \"CUSTOMER\" ORDER BY `rental`.`order_date` DESC",nativeQuery = true)
	public List<RentalResponse> FindAllwithRentalDetail();
}